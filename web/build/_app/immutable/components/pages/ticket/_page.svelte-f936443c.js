import{S as Y,i as Z,s as ee,k as i,q as j,a as P,l as c,m as p,r as A,h as n,c as C,n as a,b as K,I as t,V as N,O as H,W as te,N as Q,X as ae,o as se}from"../../../chunks/singletons-ba63ed95.js";import{a as U}from"../../../chunks/js.cookie-6fa27514.js";import{g as W,P as re}from"../../../chunks/public-f5c80973.js";function $(h){let s,e,u,w,b,r,d=h[0].render(h[2])+"";return{c(){s=i("div"),e=i("p"),u=i("strong"),w=j("Preview:"),b=P(),r=i("p"),this.h()},l(f){s=c(f,"DIV",{class:!0});var m=p(s);e=c(m,"P",{});var l=p(e);u=c(l,"STRONG",{});var k=p(u);w=A(k,"Preview:"),k.forEach(n),l.forEach(n),b=C(m),r=c(m,"P",{});var v=p(r);v.forEach(n),m.forEach(n),this.h()},h(){a(s,"class","mb-3")},m(f,m){K(f,s,m),t(s,e),t(e,u),t(u,w),t(s,b),t(s,r),r.innerHTML=d},p(f,m){m&5&&d!==(d=f[0].render(f[2])+"")&&(r.innerHTML=d)},d(f){f&&n(s)}}}function le(h){let s,e,u,w,b,r,d,f,m,l,k,v,E,R,D,T,F,O,S,I,M,V,q,o=h[0]&&h[2].length>0&&$(h);return{c(){s=i("main"),e=i("form"),u=i("h1"),w=j("Create a new Ticket"),b=P(),r=i("div"),d=i("label"),f=j("Subject"),m=P(),l=i("input"),k=P(),v=i("div"),E=i("label"),R=j("Ticket Body"),D=P(),T=i("textarea"),F=P(),o&&o.c(),O=P(),S=i("div"),I=i("button"),M=j("Submit Ticket"),this.h()},l(_){s=c(_,"MAIN",{class:!0});var y=p(s);e=c(y,"FORM",{});var g=p(e);u=c(g,"H1",{class:!0});var X=p(u);w=A(X,"Create a new Ticket"),X.forEach(n),b=C(g),r=c(g,"DIV",{class:!0});var B=p(r);d=c(B,"LABEL",{for:!0,class:!0});var x=p(d);f=A(x,"Subject"),x.forEach(n),m=C(B),l=c(B,"INPUT",{type:!0,name:!0,class:!0,id:!0,placeholder:!0}),B.forEach(n),k=C(g),v=c(g,"DIV",{class:!0});var L=p(v);E=c(L,"LABEL",{for:!0,class:!0});var z=p(E);R=A(z,"Ticket Body"),z.forEach(n),D=C(L),T=c(L,"TEXTAREA",{name:!0,class:!0,id:!0,rows:!0,placeholder:!0}),p(T).forEach(n),L.forEach(n),F=C(g),o&&o.l(g),O=C(g),S=c(g,"DIV",{class:!0});var G=p(S);I=c(G,"BUTTON",{class:!0,type:!0});var J=p(I);M=A(J,"Submit Ticket"),J.forEach(n),G.forEach(n),g.forEach(n),y.forEach(n),this.h()},h(){a(u,"class","h3 mb-3 fw-normal"),a(d,"for","exampleFormControlInput1"),a(d,"class","form-label"),a(l,"type","text"),a(l,"name","subject"),a(l,"class","form-control"),a(l,"id","exampleFormControlInput1"),a(l,"placeholder","Quick description"),a(r,"class","mb-3"),a(E,"for","exampleFormControlTextarea1"),a(E,"class","form-label"),a(T,"name","body"),a(T,"class","form-control"),a(T,"id","exampleFormControlTextarea1"),a(T,"rows","5"),a(T,"placeholder","Describe the issue in detail (markdown allowed)"),a(v,"class","mb-3"),a(I,"class","btn btn-dark bg-indigo-400 svelte-1e5ernv"),a(I,"type","submit"),a(S,"class","gap-2"),a(s,"class","container svelte-1e5ernv")},m(_,y){K(_,s,y),t(s,e),t(e,u),t(u,w),t(e,b),t(e,r),t(r,d),t(d,f),t(r,m),t(r,l),N(l,h[1]),t(e,k),t(e,v),t(v,E),t(E,R),t(v,D),t(v,T),N(T,h[2]),t(e,F),o&&o.m(e,null),t(e,O),t(e,S),t(S,I),t(I,M),V||(q=[H(l,"input",h[4]),H(T,"input",h[5]),H(e,"submit",te(h[3]))],V=!0)},p(_,[y]){y&2&&l.value!==_[1]&&N(l,_[1]),y&4&&N(T,_[2]),_[0]&&_[2].length>0?o?o.p(_,y):(o=$(_),o.c(),o.m(e,O)):o&&(o.d(1),o=null)},i:Q,o:Q,d(_){_&&n(s),o&&o.d(),V=!1,ae(q)}}}function oe(h,s,e){let u=re,w;se(async()=>{e(0,w=new window.remarkable.Remarkable)});let b,r="";async function d(){const l="open",k=await fetch(u+"tickets/",{method:"POST",body:JSON.stringify({subject:b,body:r,status:l}),headers:{Authorization:"Bearer "+U.get("jwt"),"Content-Type":"application/json"}});if(k.status===401&&(U.remove("jwt"),U.remove("user"),await W("/login",{invalidateAll:!0})),k.ok){const E=await k.json();W(`/ticket/${E.key}`)}const v=await k.text();return console.log(v),{success:k.ok,message:v}}function f(){b=this.value,e(1,b)}function m(){r=this.value,e(2,r)}return[w,b,r,d,f,m]}class ue extends Y{constructor(s){super(),Z(this,s,oe,le,ee,{})}}export{ue as default};
