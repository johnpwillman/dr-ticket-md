import{S as Se,i as Ve,s as Ce,P as me,k as i,a as S,q as E,l as c,m as u,c as V,r as y,h as o,n as d,b as C,I as r,Q as De,u as te,N as H,p as xe,R as ye,f as fe,t as _e,o as dt,Y as qe,w as et,x as tt,Z as lt,V as Ge,_ as Ie,y as nt,O as ve,W as at,g as ut,d as ft,T as st,z as rt,X as ot,e as We}from"../../../../chunks/singletons-5486e315.js";import{g as ue}from"../../../../chunks/navigation-61612511.js";import{a as ee,P as mt}from"../../../../chunks/public-9d42eb47.js";function ht(a){let t,l=a[3].message+"",e;return{c(){t=i("p"),e=E(l),this.h()},l(n){t=c(n,"P",{style:!0});var s=u(t);e=y(s,l),s.forEach(o),this.h()},h(){xe(t,"color","red")},m(n,s){C(n,t,s),r(t,e)},p(n,s){s&1&&l!==(l=n[3].message+"")&&te(e,l)},d(n){n&&o(t)}}}function _t(a){let t,l;return{c(){t=i("img"),this.h()},l(e){t=c(e,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){d(t,"class","bd-placeholder-img flex-shrink-0 me-2 rounded"),d(t,"width","48"),d(t,"height","48"),ye(t.src,l=a[2])||d(t,"src",l),d(t,"alt","gravatar-img")},m(e,n){C(e,t,n)},p(e,n){n&1&&!ye(t.src,l=e[2])&&d(t,"src",l)},d(e){e&&o(t)}}}function vt(a){let t,l;return{c(){t=i("p"),l=E("...")},l(e){t=c(e,"P",{});var n=u(t);l=y(n,"..."),n.forEach(o)},m(e,n){C(e,t,n),r(t,l)},p:H,d(e){e&&o(t)}}}function pt(a){let t,l=a[0].body+"",e;return{c(){t=i("p"),e=E(l)},l(n){t=c(n,"P",{});var s=u(t);e=y(s,l),s.forEach(o)},m(n,s){C(n,t,s),r(t,e)},p(n,s){s&1&&l!==(l=n[0].body+"")&&te(e,l)},d(n){n&&o(t)}}}function bt(a){let t,l=a[1].render(a[0].body)+"";return{c(){t=i("p")},l(e){t=c(e,"P",{});var n=u(t);n.forEach(o)},m(e,n){C(e,t,n),t.innerHTML=l},p(e,n){n&3&&l!==(l=e[1].render(e[0].body)+"")&&(t.innerHTML=l)},d(e){e&&o(t)}}}function Xe(a){let t,l=a[0].assigned_to+"",e,n,s;return{c(){t=E("Ticket reassigned to: "),e=E(l),n=S(),s=i("br")},l(f){t=y(f,"Ticket reassigned to: "),e=y(f,l),n=V(f),s=c(f,"BR",{})},m(f,k){C(f,t,k),C(f,e,k),C(f,n,k),C(f,s,k)},p(f,k){k&1&&l!==(l=f[0].assigned_to+"")&&te(e,l)},d(f){f&&o(t),f&&o(e),f&&o(n),f&&o(s)}}}function gt(a){let t,l,e,n,s,f,k,p=a[0].submitted_by+"",w,D,_,m,A,v=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"",B,U,q,Q,R=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"",G,W,L,I,X,$,Y,Z=a[0].status.toUpperCase()+"",P,J={ctx:a,current:null,token:null,hasCatch:!0,pending:vt,then:_t,catch:ht,value:2,error:3};me(n=$e(a[0].submitted_by,48),J);function ae(z,b){return z[1]?bt:pt}let N=ae(a),T=N(a),g=a[0].assigned_to&&Xe(a);return{c(){t=i("div"),l=i("div"),e=i("div"),J.block.c(),s=S(),f=i("br"),k=S(),w=E(p),D=S(),_=i("br"),m=i("br"),A=S(),B=E(v),U=S(),q=i("br"),Q=S(),G=E(R),W=S(),L=i("div"),I=i("div"),T.c(),X=S(),$=i("div"),g&&g.c(),Y=E(`\r
                Ticket state set to: `),P=E(Z),this.h()},l(z){t=c(z,"DIV",{class:!0});var b=u(t);l=c(b,"DIV",{class:!0});var K=u(l);e=c(K,"DIV",{class:!0});var O=u(e);J.block.l(O),s=V(O),f=c(O,"BR",{}),k=V(O),w=y(O,p),D=V(O),_=c(O,"BR",{}),m=c(O,"BR",{}),A=V(O),B=y(O,v),U=V(O),q=c(O,"BR",{}),Q=V(O),G=y(O,R),O.forEach(o),W=V(K),L=c(K,"DIV",{class:!0});var le=u(L);I=c(le,"DIV",{class:!0});var se=u(I);T.l(se),se.forEach(o),X=V(le),$=c(le,"DIV",{class:!0});var re=u($);g&&g.l(re),Y=y(re,`\r
                Ticket state set to: `),P=y(re,Z),re.forEach(o),le.forEach(o),K.forEach(o),b.forEach(o),this.h()},h(){d(e,"class","col-md-3 pt-2 pb-2 text-center comment-info svelte-rvquzj"),d(I,"class","card-body w-100"),d($,"class","card-footer w-100 text-muted"),d(L,"class","col-md-9 d-flex align-items-start flex-column"),d(l,"class","row g-0"),d(t,"class","card mb-3")},m(z,b){C(z,t,b),r(t,l),r(l,e),J.block.m(e,J.anchor=null),J.mount=()=>e,J.anchor=s,r(e,s),r(e,f),r(e,k),r(e,w),r(e,D),r(e,_),r(e,m),r(e,A),r(e,B),r(e,U),r(e,q),r(e,Q),r(e,G),r(l,W),r(l,L),r(L,I),T.m(I,null),r(L,X),r(L,$),g&&g.m($,null),r($,Y),r($,P)},p(z,[b]){a=z,J.ctx=a,b&1&&n!==(n=$e(a[0].submitted_by,48))&&me(n,J)||De(J,a,b),b&1&&p!==(p=a[0].submitted_by+"")&&te(w,p),b&1&&v!==(v=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"")&&te(B,v),b&1&&R!==(R=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"")&&te(G,R),N===(N=ae(a))&&T?T.p(a,b):(T.d(1),T=N(a),T&&(T.c(),T.m(I,null))),a[0].assigned_to?g?g.p(a,b):(g=Xe(a),g.c(),g.m($,Y)):g&&(g.d(1),g=null),b&1&&Z!==(Z=a[0].status.toUpperCase()+"")&&te(P,Z)},i:H,o:H,d(z){z&&o(t),J.block.d(),J.token=null,J=null,T.d(),g&&g.d()}}}async function kt(a){return(await(await fetch("https://api.hashify.net/hash/md5/hex",{method:"POST",body:a})).json()).Digest}async function $e(a,t,l,e,n){return a=typeof a<"u"?a:"john.doe@example.com",t=t>=1&&t<=2048?t:80,l=typeof l<"u"?l:"mm",e=typeof e<"u"?e:"g",n=n===!0?"y":"n","https://secure.gravatar.com/avatar/"+await kt(a.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(l)+"&rating="+e+(n==="y"?"&forcedefault="+n:"")}function wt(a,t,l){let{comment:e}=t,{md:n}=t;return a.$$set=s=>{"comment"in s&&l(0,e=s.comment),"md"in s&&l(1,n=s.md)},[e,n]}class Et extends Se{constructor(t){super(),Ve(this,t,wt,gt,Ce,{comment:0,md:1})}}function yt(a){let t,l=a[3].message+"",e;return{c(){t=i("p"),e=E(l),this.h()},l(n){t=c(n,"P",{style:!0});var s=u(t);e=y(s,l),s.forEach(o),this.h()},h(){xe(t,"color","red")},m(n,s){C(n,t,s),r(t,e)},p(n,s){s&1&&l!==(l=n[3].message+"")&&te(e,l)},d(n){n&&o(t)}}}function It(a){let t,l;return{c(){t=i("img"),this.h()},l(e){t=c(e,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){d(t,"class","bd-placeholder-img flex-shrink-0 me-2 rounded"),d(t,"width","48"),d(t,"height","48"),ye(t.src,l=a[2])||d(t,"src",l),d(t,"alt","gravatar-img")},m(e,n){C(e,t,n)},p(e,n){n&1&&!ye(t.src,l=e[2])&&d(t,"src",l)},d(e){e&&o(t)}}}function Dt(a){let t,l;return{c(){t=i("p"),l=E("...")},l(e){t=c(e,"P",{});var n=u(t);l=y(n,"..."),n.forEach(o)},m(e,n){C(e,t,n),r(t,l)},p:H,d(e){e&&o(t)}}}function Tt(a){let t,l=a[0].body+"",e;return{c(){t=i("p"),e=E(l)},l(n){t=c(n,"P",{});var s=u(t);e=y(s,l),s.forEach(o)},m(n,s){C(n,t,s),r(t,e)},p(n,s){s&1&&l!==(l=n[0].body+"")&&te(e,l)},d(n){n&&o(t)}}}function Ot(a){let t,l=a[1].render(a[0].body)+"";return{c(){t=i("p")},l(e){t=c(e,"P",{});var n=u(t);n.forEach(o)},m(e,n){C(e,t,n),t.innerHTML=l},p(e,n){n&3&&l!==(l=e[1].render(e[0].body)+"")&&(t.innerHTML=l)},d(e){e&&o(t)}}}function St(a){let t,l,e,n,s,f,k,p=a[0].submitted_by+"",w,D,_,m,A,v=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"",B,U,q,Q,R=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"",G,W,L,I,X=a[0].subject+"",$,Y,Z,P={ctx:a,current:null,token:null,hasCatch:!0,pending:Dt,then:It,catch:yt,value:2,error:3};me(n=ze(a[0].submitted_by,48),P);function J(T,g){return T[1]?Ot:Tt}let ae=J(a),N=ae(a);return{c(){t=i("div"),l=i("div"),e=i("div"),P.block.c(),s=S(),f=i("br"),k=S(),w=E(p),D=S(),_=i("br"),m=i("br"),A=S(),B=E(v),U=S(),q=i("br"),Q=S(),G=E(R),W=S(),L=i("div"),I=i("h5"),$=E(X),Y=S(),Z=i("div"),N.c(),this.h()},l(T){t=c(T,"DIV",{class:!0});var g=u(t);l=c(g,"DIV",{class:!0});var z=u(l);e=c(z,"DIV",{class:!0});var b=u(e);P.block.l(b),s=V(b),f=c(b,"BR",{}),k=V(b),w=y(b,p),D=V(b),_=c(b,"BR",{}),m=c(b,"BR",{}),A=V(b),B=y(b,v),U=V(b),q=c(b,"BR",{}),Q=V(b),G=y(b,R),b.forEach(o),W=V(z),L=c(z,"DIV",{class:!0});var K=u(L);I=c(K,"H5",{class:!0});var O=u(I);$=y(O,X),O.forEach(o),Y=V(K),Z=c(K,"DIV",{class:!0});var le=u(Z);N.l(le),le.forEach(o),K.forEach(o),z.forEach(o),g.forEach(o),this.h()},h(){d(e,"class","col-md-3 pt-2 pb-2 text-center comment-info svelte-rvquzj"),d(I,"class","card-header"),d(Z,"class","card-body"),d(L,"class","col-md-9"),d(l,"class","row g-0"),d(t,"class","card mb-3")},m(T,g){C(T,t,g),r(t,l),r(l,e),P.block.m(e,P.anchor=null),P.mount=()=>e,P.anchor=s,r(e,s),r(e,f),r(e,k),r(e,w),r(e,D),r(e,_),r(e,m),r(e,A),r(e,B),r(e,U),r(e,q),r(e,Q),r(e,G),r(l,W),r(l,L),r(L,I),r(I,$),r(L,Y),r(L,Z),N.m(Z,null)},p(T,[g]){a=T,P.ctx=a,g&1&&n!==(n=ze(a[0].submitted_by,48))&&me(n,P)||De(P,a,g),g&1&&p!==(p=a[0].submitted_by+"")&&te(w,p),g&1&&v!==(v=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"")&&te(B,v),g&1&&R!==(R=new Date(a[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"")&&te(G,R),g&1&&X!==(X=a[0].subject+"")&&te($,X),ae===(ae=J(a))&&N?N.p(a,g):(N.d(1),N=ae(a),N&&(N.c(),N.m(Z,null)))},i:H,o:H,d(T){T&&o(t),P.block.d(),P.token=null,P=null,N.d()}}}async function Vt(a){return(await(await fetch("https://api.hashify.net/hash/md5/hex",{method:"POST",body:a})).json()).Digest}async function ze(a,t,l,e,n){return a=typeof a<"u"?a:"john.doe@example.com",t=t>=1&&t<=2048?t:80,l=typeof l<"u"?l:"mm",e=typeof e<"u"?e:"g",n=n===!0?"y":"n","https://secure.gravatar.com/avatar/"+await Vt(a.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(l)+"&rating="+e+(n==="y"?"&forcedefault="+n:"")}function Ct(a,t,l){let{ticket:e}=t,{md:n}=t;return a.$$set=s=>{"ticket"in s&&l(0,e=s.ticket),"md"in s&&l(1,n=s.md)},[e,n]}class Pt extends Se{constructor(t){super(),Ve(this,t,Ct,St,Ce,{ticket:0,md:1})}}function Fe(a,t,l){const e=a.slice();return e[16]=t[l],e}function Qe(a,t,l){const e=a.slice();return e[20]=t[l],e}function Rt(a){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function jt(a){let t,l,e,n,s,f,k=a[2].subject+"",p,w,D,_,m,A,v,B,U,q,Q,R,G,W,L,I,X,$,Y,Z,P,J,ae,N,T,g,z,b,K,O,le,se,re,de,he,Te,Pe,x=a[0]&&Ye(a),oe=a[5].admin&&At(a),ce=a[2].comments,M=[];for(let h=0;h<ce.length;h+=1)M[h]=Ke(Fe(a,ce,h));const it=h=>_e(M[h],1,1,()=>{M[h]=null});return se=new Pt({props:{ticket:a[2],md:a[0]}}),{c(){t=i("form"),l=i("div"),e=i("div"),n=i("div"),s=i("h4"),f=E('Ticket: "'),p=E(k),w=E('"'),D=S(),_=i("div"),m=i("textarea"),A=S(),x&&x.c(),v=S(),B=i("div"),U=i("div"),q=i("h4"),Q=E("Update"),R=S(),G=i("div"),W=i("div"),L=i("div"),I=i("select"),X=i("option"),$=E("Open"),Y=i("option"),Z=E("With Customer"),P=i("option"),J=E("Closed"),ae=S(),N=i("div"),T=i("button"),g=E("Submit"),z=S(),oe&&oe.c(),b=S(),K=i("div"),O=i("div");for(let h=0;h<M.length;h+=1)M[h].c();le=S(),et(se.$$.fragment),re=S(),de=i("div"),this.h()},l(h){t=c(h,"FORM",{});var j=u(t);l=c(j,"DIV",{class:!0});var ne=u(l);e=c(ne,"DIV",{class:!0});var F=u(e);n=c(F,"DIV",{class:!0});var ie=u(n);s=c(ie,"H4",{class:!0});var pe=u(s);f=y(pe,'Ticket: "'),p=y(pe,k),w=y(pe,'"'),pe.forEach(o),D=V(ie),_=c(ie,"DIV",{class:!0});var Re=u(_);m=c(Re,"TEXTAREA",{class:!0,name:!0,rows:!0,placeholder:!0}),u(m).forEach(o),Re.forEach(o),A=V(ie),x&&x.l(ie),ie.forEach(o),F.forEach(o),v=V(ne),B=c(ne,"DIV",{class:!0});var je=u(B);U=c(je,"DIV",{class:!0});var be=u(U);q=c(be,"H4",{class:!0});var Ae=u(q);Q=y(Ae,"Update"),Ae.forEach(o),R=V(be),G=c(be,"DIV",{class:!0});var ge=u(G);W=c(ge,"DIV",{class:!0});var ke=u(W);L=c(ke,"DIV",{class:!0});var Be=u(L);I=c(Be,"SELECT",{class:!0,name:!0,id:!0});var we=u(I);X=c(we,"OPTION",{});var Le=u(X);$=y(Le,"Open"),Le.forEach(o),Y=c(we,"OPTION",{});var Ne=u(Y);Z=y(Ne,"With Customer"),Ne.forEach(o),P=c(we,"OPTION",{});var Me=u(P);J=y(Me,"Closed"),Me.forEach(o),we.forEach(o),Be.forEach(o),ae=V(ke),N=c(ke,"DIV",{class:!0});var He=u(N);T=c(He,"BUTTON",{class:!0});var Ue=u(T);g=y(Ue,"Submit"),Ue.forEach(o),He.forEach(o),ke.forEach(o),z=V(ge),oe&&oe.l(ge),ge.forEach(o),be.forEach(o),je.forEach(o),ne.forEach(o),j.forEach(o),b=V(h),K=c(h,"DIV",{class:!0});var Je=u(K);O=c(Je,"DIV",{class:!0});var Ee=u(O);for(let Oe=0;Oe<M.length;Oe+=1)M[Oe].l(Ee);le=V(Ee),tt(se.$$.fragment,Ee),Ee.forEach(o),Je.forEach(o),re=V(h),de=c(h,"DIV",{class:!0});var ct=u(de);ct.forEach(o),this.h()},h(){d(s,"class","card-header"),d(m,"class","form-control"),d(m,"name","body"),d(m,"rows","5"),d(m,"placeholder","Add a comment to this ticket."),d(_,"class","card-body"),d(n,"class","card"),d(e,"class","col-md-8 comment-textarea"),d(q,"class","card-header"),X.__value="open",X.value=X.__value,Y.__value="pending",Y.value=Y.__value,P.__value="closed",P.value=P.__value,d(I,"class","form-select comment-submit-select"),d(I,"name","status"),d(I,"id","exampleSelect"),a[3]===void 0&&lt(()=>a[12].call(I)),d(L,"class","col-md-8"),d(T,"class","btn btn-secondary bg-indigo-400 svelte-grsov"),d(N,"class","col-md-4"),d(W,"class","row pb-3"),d(G,"class","card-body"),d(U,"class","card"),d(B,"class","col-md-4 comment-submit"),d(l,"class","row mb-4 comment-form"),d(O,"class","col-md-8 ticket-comments"),d(K,"class","row"),d(de,"class","col-md-4 ticket-info")},m(h,j){C(h,t,j),r(t,l),r(l,e),r(e,n),r(n,s),r(s,f),r(s,p),r(s,w),r(n,D),r(n,_),r(_,m),Ge(m,a[1]),r(n,A),x&&x.m(n,null),r(l,v),r(l,B),r(B,U),r(U,q),r(q,Q),r(U,R),r(U,G),r(G,W),r(W,L),r(L,I),r(I,X),r(X,$),r(I,Y),r(Y,Z),r(I,P),r(P,J),Ie(I,a[3]),r(W,ae),r(W,N),r(N,T),r(T,g),r(G,z),oe&&oe.m(G,null),C(h,b,j),C(h,K,j),r(K,O);for(let ne=0;ne<M.length;ne+=1)M[ne].m(O,null);r(O,le),nt(se,O,null),C(h,re,j),C(h,de,j),he=!0,Te||(Pe=[ve(m,"input",a[11]),ve(I,"change",a[12]),ve(t,"submit",at(a[8]))],Te=!0)},p(h,j){if((!he||j&4)&&k!==(k=h[2].subject+"")&&te(p,k),j&2&&Ge(m,h[1]),h[0]?x?x.p(h,j):(x=Ye(h),x.c(),x.m(n,null)):x&&(x.d(1),x=null),j&8&&Ie(I,h[3]),h[5].admin&&oe.p(h,j),j&5){ce=h[2].comments;let F;for(F=0;F<ce.length;F+=1){const ie=Fe(h,ce,F);M[F]?(M[F].p(ie,j),fe(M[F],1)):(M[F]=Ke(ie),M[F].c(),fe(M[F],1),M[F].m(O,le))}for(ut(),F=ce.length;F<M.length;F+=1)it(F);ft()}const ne={};j&4&&(ne.ticket=h[2]),j&1&&(ne.md=h[0]),se.$set(ne)},i(h){if(!he){for(let j=0;j<ce.length;j+=1)fe(M[j]);fe(se.$$.fragment,h),he=!0}},o(h){M=M.filter(Boolean);for(let j=0;j<M.length;j+=1)_e(M[j]);_e(se.$$.fragment,h),he=!1},d(h){h&&o(t),x&&x.d(),oe&&oe.d(),h&&o(b),h&&o(K),st(M,h),rt(se),h&&o(re),h&&o(de),Te=!1,ot(Pe)}}}function Ye(a){let t,l,e,n,s,f,k=a[0].render(a[1])+"";return{c(){t=i("div"),l=i("p"),e=i("strong"),n=E("Preview:"),s=S(),f=i("p"),this.h()},l(p){t=c(p,"DIV",{class:!0});var w=u(t);l=c(w,"P",{});var D=u(l);e=c(D,"STRONG",{});var _=u(e);n=y(_,"Preview:"),_.forEach(o),D.forEach(o),s=V(w),f=c(w,"P",{});var m=u(f);m.forEach(o),w.forEach(o),this.h()},h(){d(t,"class","card-footer")},m(p,w){C(p,t,w),r(t,l),r(l,e),r(e,n),r(t,s),r(t,f),f.innerHTML=k},p(p,w){w&3&&k!==(k=p[0].render(p[1])+"")&&(f.innerHTML=k)},d(p){p&&o(t)}}}function At(a){let t,l={ctx:a,current:null,token:null,hasCatch:!1,pending:Nt,then:Lt,catch:Bt,value:19};return me(a[7](),l),{c(){t=We(),l.block.c()},l(e){t=We(),l.block.l(e)},m(e,n){C(e,t,n),l.block.m(e,l.anchor=n),l.mount=()=>t.parentNode,l.anchor=t},p(e,n){a=e,De(l,a,n)},d(e){e&&o(t),l.block.d(e),l.token=null,l=null}}}function Bt(a){return{c:H,l:H,m:H,p:H,d:H}}function Lt(a){let t,l,e,n,s,f,k,p,w,D=a[19],_=[];for(let m=0;m<D.length;m+=1)_[m]=Ze(Qe(a,D,m));return{c(){t=i("div"),l=i("div"),e=i("select");for(let m=0;m<_.length;m+=1)_[m].c();n=S(),s=i("div"),f=i("button"),k=E("Reassign"),this.h()},l(m){t=c(m,"DIV",{class:!0});var A=u(t);l=c(A,"DIV",{class:!0});var v=u(l);e=c(v,"SELECT",{class:!0,name:!0,id:!0});var B=u(e);for(let Q=0;Q<_.length;Q+=1)_[Q].l(B);B.forEach(o),v.forEach(o),n=V(A),s=c(A,"DIV",{class:!0});var U=u(s);f=c(U,"BUTTON",{class:!0});var q=u(f);k=y(q,"Reassign"),q.forEach(o),U.forEach(o),A.forEach(o),this.h()},h(){d(e,"class","form-select comment-submit-select"),d(e,"name","status"),d(e,"id","exampleSelect"),a[4]===void 0&&lt(()=>a[13].call(e)),d(l,"class","col-md-8"),d(f,"class","btn btn-secondary bg-indigo-400 svelte-grsov"),d(s,"class","col-md-4"),d(t,"class","row")},m(m,A){C(m,t,A),r(t,l),r(l,e);for(let v=0;v<_.length;v+=1)_[v].m(e,null);Ie(e,a[4]),r(t,n),r(t,s),r(s,f),r(f,k),p||(w=[ve(e,"change",a[13]),ve(f,"click",at(a[9]))],p=!0)},p(m,A){if(A&128){D=m[19];let v;for(v=0;v<D.length;v+=1){const B=Qe(m,D,v);_[v]?_[v].p(B,A):(_[v]=Ze(B),_[v].c(),_[v].m(e,null))}for(;v<_.length;v+=1)_[v].d(1);_.length=D.length}A&144&&Ie(e,m[4])},d(m){m&&o(t),st(_,m),p=!1,ot(w)}}}function Ze(a){let t,l=a[20].email+"",e;return{c(){t=i("option"),e=E(l),this.h()},l(n){t=c(n,"OPTION",{});var s=u(t);e=y(s,l),s.forEach(o),this.h()},h(){t.__value=a[20].email,t.value=t.__value},m(n,s){C(n,t,s),r(t,e)},p:H,d(n){n&&o(t)}}}function Nt(a){let t;return{c(){t=E("...Retreiving Admin List")},l(l){t=y(l,"...Retreiving Admin List")},m(l,e){C(l,t,e)},p:H,d(l){l&&o(t)}}}function Ke(a){let t,l;return t=new Et({props:{comment:a[16],md:a[0]}}),{c(){et(t.$$.fragment)},l(e){tt(t.$$.fragment,e)},m(e,n){nt(t,e,n),l=!0},p(e,n){const s={};n&4&&(s.comment=e[16]),n&1&&(s.md=e[0]),t.$set(s)},i(e){l||(fe(t.$$.fragment,e),l=!0)},o(e){_e(t.$$.fragment,e),l=!1},d(e){rt(t,e)}}}function Mt(a){let t,l;return{c(){t=i("h4"),l=E("..Retrieving ticket")},l(e){t=c(e,"H4",{});var n=u(t);l=y(n,"..Retrieving ticket"),n.forEach(o)},m(e,n){C(e,t,n),r(t,l)},p:H,i:H,o:H,d(e){e&&o(t)}}}function Ht(a){let t,l,e={ctx:a,current:null,token:null,hasCatch:!1,pending:Mt,then:jt,catch:Rt,blocks:[,,,]};return me(a[6](),e),{c(){t=i("main"),e.block.c(),this.h()},l(n){t=c(n,"MAIN",{class:!0});var s=u(t);e.block.l(s),s.forEach(o),this.h()},h(){d(t,"class","container svelte-grsov")},m(n,s){C(n,t,s),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,l=!0},p(n,[s]){a=n,De(e,a,s)},i(n){l||(fe(e.block),l=!0)},o(n){for(let s=0;s<3;s+=1){const f=e.blocks[s];_e(f)}l=!1},d(n){n&&o(t),e.block.d(),e.token=null,e=null}}}function Ut(a,t,l){let{data:e}=t,n=mt,s;dt(async()=>{l(0,s=new window.remarkable.Remarkable)});let f=ee.get("user"),k=f?JSON.parse(f):void 0,p="",w,D;async function _(){if(ee.get("jwt")){const R=await fetch(n+"tickets/"+e.slug,{headers:{Authorization:"Bearer "+ee.get("jwt")}});return R.status===401&&(ee.remove("jwt"),ee.remove("user"),await ue("/login",{invalidateAll:!0})),l(2,w=await R.json()),l(3,D=w.status),w}await ue("/login",{invalidateAll:!0})}let m="";async function A(){if(ee.get("jwt")){const R=await fetch(n+"users/admins",{headers:{Authorization:"Bearer "+ee.get("jwt")}});return R.status===401&&(ee.remove("jwt"),ee.remove("user"),await ue("/login",{invalidateAll:!0})),(await R.json()).filter(W=>W.key!=k.key)}}async function v(){(await fetch(n+"tickets/"+w.key+"/comments",{method:"POST",body:JSON.stringify({body:p,status:D}),headers:{Authorization:"Bearer "+ee.get("jwt"),"Content-Type":"application/json"}})).status===401&&(ee.remove("jwt"),ee.remove("user"),await ue("/login",{invalidateAll:!0})),await _(),l(1,p="")}async function B(){m.length>0&&((await fetch(n+"tickets/"+w.key+"/comments",{method:"POST",body:JSON.stringify({body:p,status:D,assigned_to:m}),headers:{Authorization:"Bearer "+ee.get("jwt"),"Content-Type":"application/json"}})).status===401&&(ee.remove("jwt"),ee.remove("user"),await ue("/login",{invalidateAll:!0})),await ue("/",{invalidateAll:!0}))}function U(){p=this.value,l(1,p)}function q(){D=qe(this),l(3,D)}function Q(){m=qe(this),l(4,m),l(7,A)}return a.$$set=R=>{"data"in R&&l(10,e=R.data)},[s,p,w,D,m,k,_,A,v,B,e,U,q,Q]}class Wt extends Se{constructor(t){super(),Ve(this,t,Ut,Ht,Ce,{data:10})}}export{Wt as default};
