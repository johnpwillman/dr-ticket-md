import{S as Oe,i as Ve,s as Ce,P as fe,k as i,a as O,q as E,l as c,m as d,c as V,r as y,h as o,n as u,b as C,I as r,Q as Te,u as te,N as H,p as xe,R as ye,f as me,t as _e,o as ut,Y as qe,w as et,x as tt,Z as lt,V as Ge,_ as Ie,y as at,O as ve,W as nt,g as dt,d as mt,T as st,z as rt,X as ot,e as We}from"../../../../chunks/singletons-749b4808.js";import{g as de}from"../../../../chunks/navigation-5bfa5b62.js";import{a as q,P as ft}from"../../../../chunks/public-9d42eb47.js";function ht(n){let t,l=n[3].message+"",e;return{c(){t=i("p"),e=E(l),this.h()},l(a){t=c(a,"P",{style:!0});var s=d(t);e=y(s,l),s.forEach(o),this.h()},h(){xe(t,"color","red")},m(a,s){C(a,t,s),r(t,e)},p(a,s){s&1&&l!==(l=a[3].message+"")&&te(e,l)},d(a){a&&o(t)}}}function _t(n){let t,l;return{c(){t=i("img"),this.h()},l(e){t=c(e,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){u(t,"class","bd-placeholder-img flex-shrink-0 me-2 rounded"),u(t,"width","48"),u(t,"height","48"),ye(t.src,l=n[2])||u(t,"src",l),u(t,"alt","gravatar-img")},m(e,a){C(e,t,a)},p(e,a){a&1&&!ye(t.src,l=e[2])&&u(t,"src",l)},d(e){e&&o(t)}}}function vt(n){let t,l;return{c(){t=i("p"),l=E("...")},l(e){t=c(e,"P",{});var a=d(t);l=y(a,"..."),a.forEach(o)},m(e,a){C(e,t,a),r(t,l)},p:H,d(e){e&&o(t)}}}function pt(n){let t,l=n[0].body+"",e;return{c(){t=i("p"),e=E(l)},l(a){t=c(a,"P",{});var s=d(t);e=y(s,l),s.forEach(o)},m(a,s){C(a,t,s),r(t,e)},p(a,s){s&1&&l!==(l=a[0].body+"")&&te(e,l)},d(a){a&&o(t)}}}function bt(n){let t,l=n[1].render(n[0].body)+"";return{c(){t=i("p")},l(e){t=c(e,"P",{});var a=d(t);a.forEach(o)},m(e,a){C(e,t,a),t.innerHTML=l},p(e,a){a&3&&l!==(l=e[1].render(e[0].body)+"")&&(t.innerHTML=l)},d(e){e&&o(t)}}}function Xe(n){let t,l=n[0].assigned_to+"",e,a,s;return{c(){t=E("Ticket reassigned to: "),e=E(l),a=O(),s=i("br")},l(m){t=y(m,"Ticket reassigned to: "),e=y(m,l),a=V(m),s=c(m,"BR",{})},m(m,k){C(m,t,k),C(m,e,k),C(m,a,k),C(m,s,k)},p(m,k){k&1&&l!==(l=m[0].assigned_to+"")&&te(e,l)},d(m){m&&o(t),m&&o(e),m&&o(a),m&&o(s)}}}function gt(n){let t,l,e,a,s,m,k,p=n[0].submitted_by+"",w,T,_,f,A,v=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"",B,U,G,Y,R=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"",W,X,L,I,$,z,Z,K=n[0].status.toUpperCase()+"",P,J={ctx:n,current:null,token:null,hasCatch:!0,pending:vt,then:_t,catch:ht,value:2,error:3};fe(a=$e(n[0].submitted_by,48),J);function ne(F,b){return F[1]?bt:pt}let N=ne(n),D=N(n),g=n[0].assigned_to&&Xe(n);return{c(){t=i("div"),l=i("div"),e=i("div"),J.block.c(),s=O(),m=i("br"),k=O(),w=E(p),T=O(),_=i("br"),f=i("br"),A=O(),B=E(v),U=O(),G=i("br"),Y=O(),W=E(R),X=O(),L=i("div"),I=i("div"),D.c(),$=O(),z=i("div"),g&&g.c(),Z=E(`\r
                Ticket state set to: `),P=E(K),this.h()},l(F){t=c(F,"DIV",{class:!0});var b=d(t);l=c(b,"DIV",{class:!0});var x=d(l);e=c(x,"DIV",{class:!0});var S=d(e);J.block.l(S),s=V(S),m=c(S,"BR",{}),k=V(S),w=y(S,p),T=V(S),_=c(S,"BR",{}),f=c(S,"BR",{}),A=V(S),B=y(S,v),U=V(S),G=c(S,"BR",{}),Y=V(S),W=y(S,R),S.forEach(o),X=V(x),L=c(x,"DIV",{class:!0});var le=d(L);I=c(le,"DIV",{class:!0});var se=d(I);D.l(se),se.forEach(o),$=V(le),z=c(le,"DIV",{class:!0});var re=d(z);g&&g.l(re),Z=y(re,`\r
                Ticket state set to: `),P=y(re,K),re.forEach(o),le.forEach(o),x.forEach(o),b.forEach(o),this.h()},h(){u(e,"class","col-md-3 pt-2 pb-2 text-center comment-info svelte-rvquzj"),u(I,"class","card-body w-100"),u(z,"class","card-footer w-100 text-muted"),u(L,"class","col-md-9 d-flex align-items-start flex-column"),u(l,"class","row g-0"),u(t,"class","card mb-3")},m(F,b){C(F,t,b),r(t,l),r(l,e),J.block.m(e,J.anchor=null),J.mount=()=>e,J.anchor=s,r(e,s),r(e,m),r(e,k),r(e,w),r(e,T),r(e,_),r(e,f),r(e,A),r(e,B),r(e,U),r(e,G),r(e,Y),r(e,W),r(l,X),r(l,L),r(L,I),D.m(I,null),r(L,$),r(L,z),g&&g.m(z,null),r(z,Z),r(z,P)},p(F,[b]){n=F,J.ctx=n,b&1&&a!==(a=$e(n[0].submitted_by,48))&&fe(a,J)||Te(J,n,b),b&1&&p!==(p=n[0].submitted_by+"")&&te(w,p),b&1&&v!==(v=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"")&&te(B,v),b&1&&R!==(R=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"")&&te(W,R),N===(N=ne(n))&&D?D.p(n,b):(D.d(1),D=N(n),D&&(D.c(),D.m(I,null))),n[0].assigned_to?g?g.p(n,b):(g=Xe(n),g.c(),g.m(z,Z)):g&&(g.d(1),g=null),b&1&&K!==(K=n[0].status.toUpperCase()+"")&&te(P,K)},i:H,o:H,d(F){F&&o(t),J.block.d(),J.token=null,J=null,D.d(),g&&g.d()}}}async function kt(n){return(await(await fetch("https://api.hashify.net/hash/md5/hex",{method:"POST",body:n})).json()).Digest}async function $e(n,t,l,e,a){return n=typeof n<"u"?n:"john.doe@example.com",t=t>=1&&t<=2048?t:80,l=typeof l<"u"?l:"mm",e=typeof e<"u"?e:"g",a=a===!0?"y":"n","https://secure.gravatar.com/avatar/"+await kt(n.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(l)+"&rating="+e+(a==="y"?"&forcedefault="+a:"")}function wt(n,t,l){let{comment:e}=t,{md:a}=t;return n.$$set=s=>{"comment"in s&&l(0,e=s.comment),"md"in s&&l(1,a=s.md)},[e,a]}class Et extends Oe{constructor(t){super(),Ve(this,t,wt,gt,Ce,{comment:0,md:1})}}function yt(n){let t,l=n[3].message+"",e;return{c(){t=i("p"),e=E(l),this.h()},l(a){t=c(a,"P",{style:!0});var s=d(t);e=y(s,l),s.forEach(o),this.h()},h(){xe(t,"color","red")},m(a,s){C(a,t,s),r(t,e)},p(a,s){s&1&&l!==(l=a[3].message+"")&&te(e,l)},d(a){a&&o(t)}}}function It(n){let t,l;return{c(){t=i("img"),this.h()},l(e){t=c(e,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){u(t,"class","bd-placeholder-img flex-shrink-0 me-2 rounded"),u(t,"width","48"),u(t,"height","48"),ye(t.src,l=n[2])||u(t,"src",l),u(t,"alt","gravatar-img")},m(e,a){C(e,t,a)},p(e,a){a&1&&!ye(t.src,l=e[2])&&u(t,"src",l)},d(e){e&&o(t)}}}function Tt(n){let t,l;return{c(){t=i("p"),l=E("...")},l(e){t=c(e,"P",{});var a=d(t);l=y(a,"..."),a.forEach(o)},m(e,a){C(e,t,a),r(t,l)},p:H,d(e){e&&o(t)}}}function Dt(n){let t,l=n[0].body+"",e;return{c(){t=i("p"),e=E(l)},l(a){t=c(a,"P",{});var s=d(t);e=y(s,l),s.forEach(o)},m(a,s){C(a,t,s),r(t,e)},p(a,s){s&1&&l!==(l=a[0].body+"")&&te(e,l)},d(a){a&&o(t)}}}function St(n){let t,l=n[1].render(n[0].body)+"";return{c(){t=i("p")},l(e){t=c(e,"P",{});var a=d(t);a.forEach(o)},m(e,a){C(e,t,a),t.innerHTML=l},p(e,a){a&3&&l!==(l=e[1].render(e[0].body)+"")&&(t.innerHTML=l)},d(e){e&&o(t)}}}function Ot(n){let t,l,e,a,s,m,k,p=n[0].submitted_by+"",w,T,_,f,A,v=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"",B,U,G,Y,R=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"",W,X,L,I,$=n[0].subject+"",z,Z,K,P={ctx:n,current:null,token:null,hasCatch:!0,pending:Tt,then:It,catch:yt,value:2,error:3};fe(a=ze(n[0].submitted_by,48),P);function J(D,g){return D[1]?St:Dt}let ne=J(n),N=ne(n);return{c(){t=i("div"),l=i("div"),e=i("div"),P.block.c(),s=O(),m=i("br"),k=O(),w=E(p),T=O(),_=i("br"),f=i("br"),A=O(),B=E(v),U=O(),G=i("br"),Y=O(),W=E(R),X=O(),L=i("div"),I=i("h5"),z=E($),Z=O(),K=i("div"),N.c(),this.h()},l(D){t=c(D,"DIV",{class:!0});var g=d(t);l=c(g,"DIV",{class:!0});var F=d(l);e=c(F,"DIV",{class:!0});var b=d(e);P.block.l(b),s=V(b),m=c(b,"BR",{}),k=V(b),w=y(b,p),T=V(b),_=c(b,"BR",{}),f=c(b,"BR",{}),A=V(b),B=y(b,v),U=V(b),G=c(b,"BR",{}),Y=V(b),W=y(b,R),b.forEach(o),X=V(F),L=c(F,"DIV",{class:!0});var x=d(L);I=c(x,"H5",{class:!0});var S=d(I);z=y(S,$),S.forEach(o),Z=V(x),K=c(x,"DIV",{class:!0});var le=d(K);N.l(le),le.forEach(o),x.forEach(o),F.forEach(o),g.forEach(o),this.h()},h(){u(e,"class","col-md-3 pt-2 pb-2 text-center comment-info svelte-rvquzj"),u(I,"class","card-header"),u(K,"class","card-body"),u(L,"class","col-md-9"),u(l,"class","row g-0"),u(t,"class","card mb-3")},m(D,g){C(D,t,g),r(t,l),r(l,e),P.block.m(e,P.anchor=null),P.mount=()=>e,P.anchor=s,r(e,s),r(e,m),r(e,k),r(e,w),r(e,T),r(e,_),r(e,f),r(e,A),r(e,B),r(e,U),r(e,G),r(e,Y),r(e,W),r(l,X),r(l,L),r(L,I),r(I,z),r(L,Z),r(L,K),N.m(K,null)},p(D,[g]){n=D,P.ctx=n,g&1&&a!==(a=ze(n[0].submitted_by,48))&&fe(a,P)||Te(P,n,g),g&1&&p!==(p=n[0].submitted_by+"")&&te(w,p),g&1&&v!==(v=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[0]+"")&&te(B,v),g&1&&R!==(R=new Date(n[0].created_at).toISOString().match(/(\d|-|:)+/g)[1]+"")&&te(W,R),g&1&&$!==($=n[0].subject+"")&&te(z,$),ne===(ne=J(n))&&N?N.p(n,g):(N.d(1),N=ne(n),N&&(N.c(),N.m(K,null)))},i:H,o:H,d(D){D&&o(t),P.block.d(),P.token=null,P=null,N.d()}}}async function Vt(n){return(await(await fetch("https://api.hashify.net/hash/md5/hex",{method:"POST",body:n})).json()).Digest}async function ze(n,t,l,e,a){return n=typeof n<"u"?n:"john.doe@example.com",t=t>=1&&t<=2048?t:80,l=typeof l<"u"?l:"mm",e=typeof e<"u"?e:"g",a=a===!0?"y":"n","https://secure.gravatar.com/avatar/"+await Vt(n.toLowerCase().trim())+"?size="+t+"&default="+encodeURIComponent(l)+"&rating="+e+(a==="y"?"&forcedefault="+a:"")}function Ct(n,t,l){let{ticket:e}=t,{md:a}=t;return n.$$set=s=>{"ticket"in s&&l(0,e=s.ticket),"md"in s&&l(1,a=s.md)},[e,a]}class Pt extends Oe{constructor(t){super(),Ve(this,t,Ct,Ot,Ce,{ticket:0,md:1})}}function Fe(n,t,l){const e=n.slice();return e[16]=t[l],e}function Qe(n,t,l){const e=n.slice();return e[20]=t[l],e}function Rt(n){return{c:H,l:H,m:H,p:H,i:H,o:H,d:H}}function jt(n){let t,l,e,a,s,m,k=n[2].subject+"",p,w,T,_,f,A,v,B,U,G,Y,R,W,X,L,I,$,z,Z,K,P,J,ne,N,D,g,F,b,x,S,le,se,re,ue,he,De,Pe,ee=n[0]&&Ye(n),oe=n[5].admin&&At(n),ce=n[2].comments,M=[];for(let h=0;h<ce.length;h+=1)M[h]=Ke(Fe(n,ce,h));const it=h=>_e(M[h],1,1,()=>{M[h]=null});return se=new Pt({props:{ticket:n[2],md:n[0]}}),{c(){t=i("form"),l=i("div"),e=i("div"),a=i("div"),s=i("h4"),m=E('Ticket: "'),p=E(k),w=E('"'),T=O(),_=i("div"),f=i("textarea"),A=O(),ee&&ee.c(),v=O(),B=i("div"),U=i("div"),G=i("h4"),Y=E("Update"),R=O(),W=i("div"),X=i("div"),L=i("div"),I=i("select"),$=i("option"),z=E("Open"),Z=i("option"),K=E("With Customer"),P=i("option"),J=E("Closed"),ne=O(),N=i("div"),D=i("button"),g=E("Submit"),F=O(),oe&&oe.c(),b=O(),x=i("div"),S=i("div");for(let h=0;h<M.length;h+=1)M[h].c();le=O(),et(se.$$.fragment),re=O(),ue=i("div"),this.h()},l(h){t=c(h,"FORM",{});var j=d(t);l=c(j,"DIV",{class:!0});var ae=d(l);e=c(ae,"DIV",{class:!0});var Q=d(e);a=c(Q,"DIV",{class:!0});var ie=d(a);s=c(ie,"H4",{class:!0});var pe=d(s);m=y(pe,'Ticket: "'),p=y(pe,k),w=y(pe,'"'),pe.forEach(o),T=V(ie),_=c(ie,"DIV",{class:!0});var Re=d(_);f=c(Re,"TEXTAREA",{class:!0,name:!0,rows:!0,placeholder:!0}),d(f).forEach(o),Re.forEach(o),A=V(ie),ee&&ee.l(ie),ie.forEach(o),Q.forEach(o),v=V(ae),B=c(ae,"DIV",{class:!0});var je=d(B);U=c(je,"DIV",{class:!0});var be=d(U);G=c(be,"H4",{class:!0});var Ae=d(G);Y=y(Ae,"Update"),Ae.forEach(o),R=V(be),W=c(be,"DIV",{class:!0});var ge=d(W);X=c(ge,"DIV",{class:!0});var ke=d(X);L=c(ke,"DIV",{class:!0});var Be=d(L);I=c(Be,"SELECT",{class:!0,name:!0,id:!0});var we=d(I);$=c(we,"OPTION",{});var Le=d($);z=y(Le,"Open"),Le.forEach(o),Z=c(we,"OPTION",{});var Ne=d(Z);K=y(Ne,"With Customer"),Ne.forEach(o),P=c(we,"OPTION",{});var Me=d(P);J=y(Me,"Closed"),Me.forEach(o),we.forEach(o),Be.forEach(o),ne=V(ke),N=c(ke,"DIV",{class:!0});var He=d(N);D=c(He,"BUTTON",{class:!0});var Ue=d(D);g=y(Ue,"Submit"),Ue.forEach(o),He.forEach(o),ke.forEach(o),F=V(ge),oe&&oe.l(ge),ge.forEach(o),be.forEach(o),je.forEach(o),ae.forEach(o),j.forEach(o),b=V(h),x=c(h,"DIV",{class:!0});var Je=d(x);S=c(Je,"DIV",{class:!0});var Ee=d(S);for(let Se=0;Se<M.length;Se+=1)M[Se].l(Ee);le=V(Ee),tt(se.$$.fragment,Ee),Ee.forEach(o),Je.forEach(o),re=V(h),ue=c(h,"DIV",{class:!0});var ct=d(ue);ct.forEach(o),this.h()},h(){u(s,"class","card-header"),u(f,"class","form-control"),u(f,"name","body"),u(f,"rows","5"),u(f,"placeholder","Add a comment to this ticket."),u(_,"class","card-body"),u(a,"class","card"),u(e,"class","col-md-8 comment-textarea"),u(G,"class","card-header"),$.__value="open",$.value=$.__value,Z.__value="pending",Z.value=Z.__value,P.__value="closed",P.value=P.__value,u(I,"class","form-select comment-submit-select"),u(I,"name","status"),u(I,"id","exampleSelect"),n[3]===void 0&&lt(()=>n[12].call(I)),u(L,"class","col-md-8"),u(D,"class","btn btn-secondary bg-indigo-400 svelte-grsov"),u(N,"class","col-md-4"),u(X,"class","row pb-3"),u(W,"class","card-body"),u(U,"class","card"),u(B,"class","col-md-4 comment-submit"),u(l,"class","row mb-4 comment-form"),u(S,"class","col-md-8 ticket-comments"),u(x,"class","row"),u(ue,"class","col-md-4 ticket-info")},m(h,j){C(h,t,j),r(t,l),r(l,e),r(e,a),r(a,s),r(s,m),r(s,p),r(s,w),r(a,T),r(a,_),r(_,f),Ge(f,n[1]),r(a,A),ee&&ee.m(a,null),r(l,v),r(l,B),r(B,U),r(U,G),r(G,Y),r(U,R),r(U,W),r(W,X),r(X,L),r(L,I),r(I,$),r($,z),r(I,Z),r(Z,K),r(I,P),r(P,J),Ie(I,n[3]),r(X,ne),r(X,N),r(N,D),r(D,g),r(W,F),oe&&oe.m(W,null),C(h,b,j),C(h,x,j),r(x,S);for(let ae=0;ae<M.length;ae+=1)M[ae].m(S,null);r(S,le),at(se,S,null),C(h,re,j),C(h,ue,j),he=!0,De||(Pe=[ve(f,"input",n[11]),ve(I,"change",n[12]),ve(t,"submit",nt(n[8]))],De=!0)},p(h,j){if((!he||j&4)&&k!==(k=h[2].subject+"")&&te(p,k),j&2&&Ge(f,h[1]),h[0]?ee?ee.p(h,j):(ee=Ye(h),ee.c(),ee.m(a,null)):ee&&(ee.d(1),ee=null),j&8&&Ie(I,h[3]),h[5].admin&&oe.p(h,j),j&5){ce=h[2].comments;let Q;for(Q=0;Q<ce.length;Q+=1){const ie=Fe(h,ce,Q);M[Q]?(M[Q].p(ie,j),me(M[Q],1)):(M[Q]=Ke(ie),M[Q].c(),me(M[Q],1),M[Q].m(S,le))}for(dt(),Q=ce.length;Q<M.length;Q+=1)it(Q);mt()}const ae={};j&4&&(ae.ticket=h[2]),j&1&&(ae.md=h[0]),se.$set(ae)},i(h){if(!he){for(let j=0;j<ce.length;j+=1)me(M[j]);me(se.$$.fragment,h),he=!0}},o(h){M=M.filter(Boolean);for(let j=0;j<M.length;j+=1)_e(M[j]);_e(se.$$.fragment,h),he=!1},d(h){h&&o(t),ee&&ee.d(),oe&&oe.d(),h&&o(b),h&&o(x),st(M,h),rt(se),h&&o(re),h&&o(ue),De=!1,ot(Pe)}}}function Ye(n){let t,l,e,a,s,m,k=n[0].render(n[1])+"";return{c(){t=i("div"),l=i("p"),e=i("strong"),a=E("Preview:"),s=O(),m=i("p"),this.h()},l(p){t=c(p,"DIV",{class:!0});var w=d(t);l=c(w,"P",{});var T=d(l);e=c(T,"STRONG",{});var _=d(e);a=y(_,"Preview:"),_.forEach(o),T.forEach(o),s=V(w),m=c(w,"P",{});var f=d(m);f.forEach(o),w.forEach(o),this.h()},h(){u(t,"class","card-footer")},m(p,w){C(p,t,w),r(t,l),r(l,e),r(e,a),r(t,s),r(t,m),m.innerHTML=k},p(p,w){w&3&&k!==(k=p[0].render(p[1])+"")&&(m.innerHTML=k)},d(p){p&&o(t)}}}function At(n){let t,l={ctx:n,current:null,token:null,hasCatch:!1,pending:Nt,then:Lt,catch:Bt,value:19};return fe(n[7](),l),{c(){t=We(),l.block.c()},l(e){t=We(),l.block.l(e)},m(e,a){C(e,t,a),l.block.m(e,l.anchor=a),l.mount=()=>t.parentNode,l.anchor=t},p(e,a){n=e,Te(l,n,a)},d(e){e&&o(t),l.block.d(e),l.token=null,l=null}}}function Bt(n){return{c:H,l:H,m:H,p:H,d:H}}function Lt(n){let t,l,e,a,s,m,k,p,w,T=n[19],_=[];for(let f=0;f<T.length;f+=1)_[f]=Ze(Qe(n,T,f));return{c(){t=i("div"),l=i("div"),e=i("select");for(let f=0;f<_.length;f+=1)_[f].c();a=O(),s=i("div"),m=i("button"),k=E("Reassign"),this.h()},l(f){t=c(f,"DIV",{class:!0});var A=d(t);l=c(A,"DIV",{class:!0});var v=d(l);e=c(v,"SELECT",{class:!0,name:!0,id:!0});var B=d(e);for(let Y=0;Y<_.length;Y+=1)_[Y].l(B);B.forEach(o),v.forEach(o),a=V(A),s=c(A,"DIV",{class:!0});var U=d(s);m=c(U,"BUTTON",{class:!0});var G=d(m);k=y(G,"Reassign"),G.forEach(o),U.forEach(o),A.forEach(o),this.h()},h(){u(e,"class","form-select comment-submit-select"),u(e,"name","status"),u(e,"id","exampleSelect"),n[4]===void 0&&lt(()=>n[13].call(e)),u(l,"class","col-md-8"),u(m,"class","btn btn-secondary bg-indigo-400 svelte-grsov"),u(s,"class","col-md-4"),u(t,"class","row")},m(f,A){C(f,t,A),r(t,l),r(l,e);for(let v=0;v<_.length;v+=1)_[v].m(e,null);Ie(e,n[4]),r(t,a),r(t,s),r(s,m),r(m,k),p||(w=[ve(e,"change",n[13]),ve(m,"click",nt(n[9]))],p=!0)},p(f,A){if(A&128){T=f[19];let v;for(v=0;v<T.length;v+=1){const B=Qe(f,T,v);_[v]?_[v].p(B,A):(_[v]=Ze(B),_[v].c(),_[v].m(e,null))}for(;v<_.length;v+=1)_[v].d(1);_.length=T.length}A&144&&Ie(e,f[4])},d(f){f&&o(t),st(_,f),p=!1,ot(w)}}}function Ze(n){let t,l=n[20].email+"",e;return{c(){t=i("option"),e=E(l),this.h()},l(a){t=c(a,"OPTION",{});var s=d(t);e=y(s,l),s.forEach(o),this.h()},h(){t.__value=n[20].email,t.value=t.__value},m(a,s){C(a,t,s),r(t,e)},p:H,d(a){a&&o(t)}}}function Nt(n){let t;return{c(){t=E("...Retreiving Admin List")},l(l){t=y(l,"...Retreiving Admin List")},m(l,e){C(l,t,e)},p:H,d(l){l&&o(t)}}}function Ke(n){let t,l;return t=new Et({props:{comment:n[16],md:n[0]}}),{c(){et(t.$$.fragment)},l(e){tt(t.$$.fragment,e)},m(e,a){at(t,e,a),l=!0},p(e,a){const s={};a&4&&(s.comment=e[16]),a&1&&(s.md=e[0]),t.$set(s)},i(e){l||(me(t.$$.fragment,e),l=!0)},o(e){_e(t.$$.fragment,e),l=!1},d(e){rt(t,e)}}}function Mt(n){let t,l;return{c(){t=i("h4"),l=E("..Retrieving ticket")},l(e){t=c(e,"H4",{});var a=d(t);l=y(a,"..Retrieving ticket"),a.forEach(o)},m(e,a){C(e,t,a),r(t,l)},p:H,i:H,o:H,d(e){e&&o(t)}}}function Ht(n){let t,l,e={ctx:n,current:null,token:null,hasCatch:!1,pending:Mt,then:jt,catch:Rt,blocks:[,,,]};return fe(n[6](),e),{c(){t=i("main"),e.block.c(),this.h()},l(a){t=c(a,"MAIN",{class:!0});var s=d(t);e.block.l(s),s.forEach(o),this.h()},h(){u(t,"class","container svelte-grsov")},m(a,s){C(a,t,s),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,l=!0},p(a,[s]){n=a,Te(e,n,s)},i(a){l||(me(e.block),l=!0)},o(a){for(let s=0;s<3;s+=1){const m=e.blocks[s];_e(m)}l=!1},d(a){a&&o(t),e.block.d(),e.token=null,e=null}}}function Ut(n,t,l){let{data:e}=t,a=ft,s;ut(async()=>{l(0,s=new window.remarkable.Remarkable)});let m=q.get("user"),k=m?JSON.parse(m):void 0,p="",w,T;async function _(){if(q.get("jwt")){const R=await fetch(a+"tickets/"+e.slug,{headers:{Authorization:"Bearer "+q.get("jwt")}});return R.status===401&&(q.remove("jwt"),q.remove("user"),q.set("routeTo",e.url.pathname,{path:"/login",sameSite:"strict"}),await de("/login",{invalidateAll:!0})),l(2,w=await R.json()),l(3,T=w.status),w}q.set("routeTo",e.url.pathname,{path:"/login",sameSite:"strict"}),await de("/login",{invalidateAll:!0})}let f="";async function A(){if(q.get("jwt")){const R=await fetch(a+"users/admins",{headers:{Authorization:"Bearer "+q.get("jwt")}});return R.status===401&&(q.remove("jwt"),q.remove("user"),q.set("routeTo",e.url.pathname,{path:"/login",sameSite:"strict"}),await de("/login",{invalidateAll:!0})),(await R.json()).filter(X=>X.key!=k.key)}}async function v(){(await fetch(a+"tickets/"+w.key+"/comments",{method:"POST",body:JSON.stringify({body:p,status:T}),headers:{Authorization:"Bearer "+q.get("jwt"),"Content-Type":"application/json"}})).status===401&&(q.remove("jwt"),q.remove("user"),q.set("routeTo",e.url.pathname,{path:"/login",sameSite:"strict"}),await de("/login",{invalidateAll:!0})),await _(),l(1,p="")}async function B(){f.length>0&&((await fetch(a+"tickets/"+w.key+"/comments",{method:"POST",body:JSON.stringify({body:p,status:T,assigned_to:f}),headers:{Authorization:"Bearer "+q.get("jwt"),"Content-Type":"application/json"}})).status===401&&(q.remove("jwt"),q.remove("user"),q.set("routeTo",e.url.pathname,{path:"/login",sameSite:"strict"}),await de("/login",{invalidateAll:!0})),await de("/",{invalidateAll:!0}))}function U(){p=this.value,l(1,p)}function G(){T=qe(this),l(3,T)}function Y(){f=qe(this),l(4,f),l(7,A)}return n.$$set=R=>{"data"in R&&l(10,e=R.data)},[s,p,w,T,f,k,_,A,v,B,e,U,G,Y]}class Wt extends Oe{constructor(t){super(),Ve(this,t,Ut,Ht,Ce,{data:10})}}export{Wt as default};
